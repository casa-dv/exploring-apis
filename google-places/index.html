<!DOCTYPE html>
<html>
<head>
	<link rel='stylesheet' id='font-css'  href='http://fonts.googleapis.com/css?family=Roboto:400,300,100' type='text/css' media='all' />
	<link rel='stylesheet' id='font-css'  href='./css/style.css' type='text/css' media='all' />
    <link rel="stylesheet" href="http://cdn.leafletjs.com/leaflet/v0.7.7/leaflet.css" />
    
    <script type='text/javascript' src='http://code.jquery.com/jquery-1.10.2.min.js?ver=1.10.2'></script>
    <script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?libraries=visualization&sensor=true"> </script>
    <script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?key="YOUR_KEY"&libraries=places"></script>
    <script type='text/javascript' src='http://arshaw.com/xdate/downloads/0.8/xdate.js'></script>
    <script type='text/javascript' src='./js/mapStyle.js'></script>
</head>
    
<body>
<div id='wrapper'>
     <div id="map-canvas"></div>
     <div id="titleHeader">
     	 <h1>Places around this bus stop</h1>
     </div>
</div>
    
<script type="text/javascript">
    
    nameArray = [];
    function initialize() {
        var location = new google.maps.LatLng(51.511732, -0.123270);
        var map = new google.maps.Map(document.getElementById("map-canvas"), {
            center: location,
            zoom: 18,
            minZoom: 18,
            maxZoom: 18,
            styles: greyMap
            });
        var request = {
            location: location,
            radius: '500',
            types: ['cafe']
        };
        var service = new google.maps.places.PlacesService(map);
        service.nearbySearch(request, function(results, status) {
            if (status === google.maps.places.PlacesServiceStatus.OK) {
                    for (var i = 0; i < results.length; i++) {
                        var place = results[i];
                        var name = place.name;
                        nameArray.push(name);
                        var marker = new google.maps.Marker({
                            map: map,
                            position: place.geometry.location
                        });
                    };
            };
        });
    };
    
    function control() {
        console.log(nameArray);
    }

// Run the initialize function when the window has finished loading.
google.maps.event.addDomListener(window, 'load', initialize);
    
</script>
</body>
</html>
